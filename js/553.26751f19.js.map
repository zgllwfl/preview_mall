{"version":3,"file":"js/553.26751f19.js","mappings":"0NAKO,MAAMA,EAAW,KACfC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,cAIIC,EAAc,CAACC,EAAMC,KACzBJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,SACLI,OAAQ,CAEND,QAAAA,EACAE,SAAU,M,6EChBTC,MAAM,Y,UACTC,EAAAA,EAAAA,GAEM,OAFDD,MAAM,aAAW,EACpBC,EAAAA,EAAAA,GAAqC,KAAlCD,MAAM,4BADX,K,UAGAC,EAAAA,EAAAA,GAEM,OAFDD,MAAM,gBAAc,EACvBC,EAAAA,EAAAA,GAA8B,YAAxB,uBADR,K,GAHAC,EAGAC,G,kCAJFC,EAAAA,EAAAA,IAOM,MAPN,EAOMC,G,YCPR,MAAMC,EAAS,GAKTC,GAA2B,OAAgBD,EAAQ,CAAC,CAAC,SAASE,GAAQ,CAAC,YAAY,qBAEzF,Q,+SCiBA,MAAMC,GAASC,EAAAA,EAAAA,MACTC,EAAW,IAAMF,EAAOG,KAAK,WAC7BC,EAAS,IAAMJ,EAAOG,KAAK,S,4SCrBjC,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,qXCLA,MAAM,EAAc,EAEpB,Q,wYCFA,MAAM,EAAc,EAEpB,Q,geC0CA,MAAMH,GAASC,EAAAA,EAAAA,MAETI,EAAYC,IAChBN,EAAOG,KAAK,CACVI,KAAM,iBACNlB,OAAQ,CACNmB,IAAKF,EAAKC,KACVE,GAAIH,EAAKG,O,4+BChDf,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE,U,gGC2CA,MAAMC,GAAQC,EAAAA,EAAAA,MACRC,GAAWC,EAAAA,EAAAA,IAAS,CACxBC,QAAS,GACTC,MAAO,GACPC,SAAU,GACVC,WAAY,GACZC,SAAS,IAELC,GAAWN,EAAAA,EAAAA,IAAS,CACxBzB,QAAS,EACTE,SAAU,GACV8B,KAAM,MAGRC,EAAAA,EAAAA,KAAUC,UACR,MAAMC,GAAQC,EAAAA,GAAAA,IAAQ,SAClBD,GAAOb,EAAMe,SAAS,oBAE1B,YAAc,CACZC,QAAS,SACTC,aAAa,IAEf,MACEC,MAAM,QAAEC,EAAF,SAAWC,EAAX,WAAqBb,EAArB,UAAiCc,UAC/BhD,IACV6B,EAASE,QAAUe,EACnBjB,EAASG,MAAQe,EACjBlB,EAASmB,UAAYA,EACrBnB,EAASK,WAAaA,EACtBL,EAASM,SAAU,EACnBc,IACA,eAIF,MAAMC,EAAY,OAKZC,EAAW,IAAMF,EAAgB,UAEjCG,GAAOC,EAAAA,EAAAA,KAAI,GAEXJ,EAAmB7C,IACvBD,EAAYC,EAAMgC,EAAS/B,SAASiD,MAAMC,IACxC,MAAMC,EAAYD,EAAIV,KAAKR,KAC3BD,EAASC,KAAKjB,QAAQoC,GACG,IAArBA,EAAUC,QACZL,EAAKM,OAAQ,EACbtB,EAAS/B,SAAW,EACpBsD,GAAWD,OAAOE,gBAElBR,EAAKM,OAAQ,MAKbG,GAAcR,EAAAA,EAAAA,KAAI,GAElBS,EAAgBC,IACpBF,EAAYH,MAAQK,EAASC,GAAK,KAI9BC,EAAc,OAIdN,GAAYN,EAAAA,EAAAA,IAAI,MAChBa,EAAY,IAAMP,EAAUD,MAAMS,SAAS,EAAG,EAAG,K,0zCCnHvD,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://mall/./src/api/homePage.js","webpack://mall/./src/views/home/components/Headline.vue","webpack://mall/./src/views/home/components/Headline.vue?dd5a","webpack://mall/./src/views/home/components/HomeNavBar.vue","webpack://mall/./src/views/home/components/HomeNavBar.vue?8c9b","webpack://mall/./src/views/home/components/Product.vue","webpack://mall/./src/views/home/components/Recommend.vue","webpack://mall/./src/views/home/components/Newcomer.vue","webpack://mall/./src/views/home/components/Newcomer.vue?294d","webpack://mall/./src/views/home/Home.vue","webpack://mall/./src/views/home/Home.vue?d8ad"],"sourcesContent":["import request from '@/utils/request'\r\n\r\n/**\r\n * 首页数据\r\n */\r\nexport const homePage = () => {\r\n  return request({\r\n    url: '/homePage'\r\n  })\r\n}\r\n\r\nexport const getHomeData = (type, pageNum) => {\r\n  return request({\r\n    url: '/goods',\r\n    params: {\r\n      // type,\r\n      pageNum,\r\n      pageSize: 20\r\n    }\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"news-box\">\r\n    <div class=\"news-icon\">\r\n      <i class=\"iconfont icon-gonggao\"></i>\r\n    </div>\r\n    <div class=\"news-content\">\r\n      <span>重要公告 | 所有商品均为展示专用</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup></script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.news-box {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 40px;\r\n  padding: 0 5px;\r\n  background: #fff;\r\n  margin-top: 5px;\r\n  border-top: 1px solid #f3f3f3;\r\n  border-bottom: 1px solid #f3f3f3;\r\n  font-size: 14px;\r\n  .news-icon {\r\n    width: 40px;\r\n    text-align: center;\r\n    i {\r\n      vertical-align: middle;\r\n      font-size: 19px;\r\n      color: #ec6d72;\r\n    }\r\n  }\r\n  .news-content {\r\n    span {\r\n      font-size: 13px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Headline.vue?vue&type=template&id=3f099006&scoped=true\"\nconst script = {}\n\nimport \"./Headline.vue?vue&type=style&index=0&id=3f099006&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3f099006\"]])\n\nexport default __exports__","<template>\r\n  <nav-bar class=\"border-1px\">\r\n    <template #left>\r\n      <div class=\"logo\">\r\n        <span style=\"vertical-align: baseline\" @click=\"goHome\">LOGO</span>\r\n      </div>\r\n    </template>\r\n    <template #center>\r\n      <div class=\"search\" @click=\"goSearch\">\r\n        <i class=\"iconfont icon-search\"></i>\r\n        <span>搜您喜欢的...</span>\r\n      </div>\r\n    </template>\r\n    <template #right>\r\n      <div class=\"kefu\">\r\n        <i class=\"iconfont icon-service\"></i>\r\n      </div>\r\n    </template>\r\n  </nav-bar>\r\n</template>\r\n\r\n<script setup>\r\nimport { useRouter } from 'vue-router'\r\nimport NavBar from 'components/navbar/NavBar'\r\n\r\nconst router = useRouter()\r\nconst goSearch = () => router.push('/search')\r\nconst goHome = () => router.push('/home')\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.logo {\r\n  margin-left: 10px;\r\n  span {\r\n    font-size: 16px;\r\n  }\r\n}\r\n\r\n.search {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 96%;\r\n  height: 30px;\r\n  margin-left: 25px;\r\n  background-color: #f3f3f3;\r\n  border-radius: 15px;\r\n  i {\r\n    padding: 0 5px;\r\n    font-size: 20px;\r\n    color: #ccc;\r\n  }\r\n  span {\r\n    font-size: 14px;\r\n    color: #ccc;\r\n  }\r\n}\r\n\r\n.kefu {\r\n  i {\r\n    font-size: 23px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./HomeNavBar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomeNavBar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomeNavBar.vue?vue&type=style&index=0&id=adbce67c&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-adbce67c\"]])\n\nexport default __exports__","import script from \"./Product.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Product.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./Recommend.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Recommend.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <floor title=\"新人专享\">\r\n    <van-skeleton title :row=\"3\" :loading=\"loading\">\r\n      <div class=\"content\">\r\n        <div class=\"left\" @click=\"goDetail(newcomers.left)\">\r\n          <div class=\"name\">{{ newcomers.left.name }}</div>\r\n          <div class=\"imgWrap\">\r\n            <div style=\"min-height: 1px\">\r\n              <div class=\"img\">\r\n                <img :src=\"newcomers.left.img_url\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"animate\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"right\">\r\n          <div v-for=\"item in newcomers.right\" :key=\"item.id\" class=\"module\" @click=\"goDetail(item)\">\r\n            <div class=\"m-activityItem\">\r\n              <div class=\"picWrap\">\r\n                <div class=\"pic\">\r\n                  <img :src=\"item.img_url\" />\r\n                </div>\r\n                <div class=\"discount\">\r\n                  <div v-for=\"price in item.discount\" :key=\"price\" class=\"line\">{{ price }}</div>\r\n                </div>\r\n              </div>\r\n              <div class=\"cnt\">\r\n                <div class=\"title\">{{ item.name }}</div>\r\n                <div class=\"subTitle\">{{ item.subTitle }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </van-skeleton>\r\n  </floor>\r\n</template>\r\n\r\n<script setup>\r\nimport { useRouter } from 'vue-router'\r\nimport Floor from 'components/floor/floor'\r\n\r\ndefineProps({\r\n  newcomers: Object,\r\n  loading: Boolean\r\n})\r\n\r\nconst router = useRouter()\r\n\r\nconst goDetail = (item) => {\r\n  router.push({\r\n    name: 'categoryDetail',\r\n    params: {\r\n      key: item.name,\r\n      id: item.id\r\n    }\r\n  })\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.floor-box {\r\n  margin-top: 5px;\r\n}\r\n.content {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 8px 5px 0px;\r\n  overflow: hidden;\r\n  .left {\r\n    display: block;\r\n    width: 50%;\r\n    height: 240px;\r\n    background: #f9e9cf;\r\n    border-radius: 2px;\r\n    margin-right: 2px;\r\n    color: #333;\r\n    .name {\r\n      font-family: PingFangSC-Medium;\r\n      font-size: 18px;\r\n      padding: 16px 0 0 16px;\r\n    }\r\n    .imgWrap {\r\n      margin: 20px auto;\r\n      width: 140px;\r\n      height: 140px;\r\n      position: relative;\r\n      .img {\r\n        width: 140px;\r\n        height: 140px;\r\n        img {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n      }\r\n      .animate {\r\n        position: absolute;\r\n        width: 16.5px;\r\n        height: 10px;\r\n        bottom: 10px;\r\n        right: 36px;\r\n        background: url('https://yanxuan.nosdn.127.net/3f7e731c6650bc1770589c78bd5a18b7.png');\r\n        background-repeat: no-repeat;\r\n        background-size: 100% 100%;\r\n        -webkit-animation: carousel 1s linear infinite;\r\n        animation: carousel 1s linear infinite;\r\n      }\r\n    }\r\n  }\r\n  .right {\r\n    height: 240px;\r\n    width: 50%;\r\n    .module {\r\n      background: #fbe2d3;\r\n      border-radius: 4px;\r\n      width: 100%;\r\n      height: 119.5px;\r\n      margin-bottom: 2px;\r\n      .m-activityItem {\r\n        height: 120px;\r\n        position: relative;\r\n        display: block;\r\n        color: #333;\r\n        width: 190px;\r\n        height: 120px;\r\n        float: left;\r\n        border-radius: 2px;\r\n        margin: 2px 2px 0;\r\n        font-size: 13px;\r\n        padding: 10px 0 0 16px;\r\n        .picWrap {\r\n          top: 8px;\r\n          width: 120px;\r\n          height: 120px;\r\n          position: absolute;\r\n          right: 0;\r\n          top: 0;\r\n          .pic {\r\n            width: 110px;\r\n            height: 110px;\r\n            & > img {\r\n              width: 100%;\r\n              height: auto;\r\n            }\r\n          }\r\n          .discount {\r\n            position: absolute;\r\n            top: 16px;\r\n            right: 25px;\r\n            width: 42px;\r\n            height: 42px;\r\n            opacity: 0.8;\r\n            background: #f59524;\r\n            border-radius: 50%;\r\n            padding-top: 6px;\r\n            color: #fff;\r\n            text-align: center;\r\n            .line {\r\n              font-size: 13px;\r\n            }\r\n            div:nth-child(2) {\r\n              text-decoration: line-through;\r\n            }\r\n          }\r\n        }\r\n        .cnt {\r\n          position: relative;\r\n          .title {\r\n            font-family: PingFangSC-Medium;\r\n            font-size: 18px;\r\n          }\r\n          .subTitle {\r\n            color: #7f7f7f;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./Newcomer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Newcomer.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Newcomer.vue?vue&type=style&index=0&id=f6e1d3a0&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f6e1d3a0\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"home\">\r\n    <!-- 顶部导航栏 -->\r\n    <home-nav-bar></home-nav-bar>\r\n    <scroll\r\n      ref=\"scrollRef\"\r\n      :pulldown=\"scrollTop\"\r\n      :pullup=\"loadMore\"\r\n      :listen-scroll=\"true\"\r\n      :before-scroll=\"true\"\r\n      @scroll=\"listenScroll\"\r\n      @afterScroll=\"afterScroll\"\r\n    >\r\n      <!-- 轮播图 -->\r\n      <van-skeleton title :row=\"3\" :loading=\"homeData.loading\">\r\n        <swiper :images=\"homeData.swipers\" :autoplay=\"3000\"></swiper>\r\n      </van-skeleton>\r\n      <!-- 分类 -->\r\n      <icons :icons=\"homeData.icons\" :loading=\"homeData.loading\"></icons>\r\n      <!-- 头条, 公告 -->\r\n      <van-skeleton title :row=\"2\" :loading=\"homeData.loading\">\r\n        <head-line></head-line>\r\n      </van-skeleton>\r\n      <!-- 新人专享 -->\r\n      <newcomer v-if=\"homeData.newcomers\" :newcomers=\"homeData.newcomers\" :loading=\"homeData.loading\"></newcomer>\r\n      <!-- 爆款推荐 -->\r\n      <recommend :recommend-data=\"homeData.recommends\" :loading=\"homeData.loading\"></recommend>\r\n      <!-- 猜你喜欢 -->\r\n      <product :product-data=\"products.list\" :loading=\"homeData.loading\"></product>\r\n      <div class=\"not-more\">\r\n        <span v-if=\"more\">加载中......</span>\r\n        <span v-else>没有更多了</span>\r\n      </div>\r\n    </scroll>\r\n    <!-- 回到顶部 -->\r\n    <back-top v-show=\"showBackTop\" @backToTop=\"backToTop\"></back-top>\r\n    <!-- 底部导航栏 -->\r\n    <tab-bar></tab-bar>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { Toast } from 'vant'\r\nimport { homePage, getHomeData } from '@/api/homePage'\r\nimport { TabBar, Scroll, Swiper, Icons, BackTop } from 'components'\r\nimport { HomeNavBar, Newcomer, Recommend, Product } from './components'\r\nimport HeadLine from './components/Headline'\r\nimport { getItem } from '@/utils/storage'\r\n\r\nconst store = useStore()\r\nconst homeData = reactive({\r\n  swipers: [],\r\n  icons: [],\r\n  seckills: {},\r\n  recommends: [],\r\n  loading: true\r\n})\r\nconst products = reactive({\r\n  pageNum: 1,\r\n  pageSize: 10,\r\n  list: []\r\n})\r\n\r\nonMounted(async () => {\r\n  const token = getItem('token')\r\n  if (token) store.dispatch('cart/getCartList')\r\n\r\n  Toast.loading({\r\n    message: '加载中...',\r\n    forbidClick: true\r\n  })\r\n  const {\r\n    data: { banners, catitems, recommends, newcomers }\r\n  } = await homePage()\r\n  homeData.swipers = banners\r\n  homeData.icons = catitems\r\n  homeData.newcomers = newcomers\r\n  homeData.recommends = recommends\r\n  homeData.loading = false\r\n  getHomeProducts() // 获取首页猜你喜欢数据\r\n  Toast.clear()\r\n})\r\n\r\n// 顶部下拉加载触发\r\nconst scrollTop = () => {\r\n  // console.log('scroll顶部下拉')\r\n}\r\n\r\n// 滚动到底部触发上拉加载触发\r\nconst loadMore = () => getHomeProducts('pullUp')\r\n\r\nconst more = ref(false)\r\n\r\nconst getHomeProducts = (type) => {\r\n  getHomeData(type, products.pageNum).then((res) => {\r\n    const goodsList = res.data.list\r\n    products.list.push(...goodsList)\r\n    if (goodsList.length !== 0) {\r\n      more.value = true\r\n      products.pageNum += 1\r\n      scrollRef?.value?.finishPullUp()\r\n    } else {\r\n      more.value = false\r\n    }\r\n  })\r\n}\r\n\r\nconst showBackTop = ref(false)\r\n// 滚动过程中触发\r\nconst listenScroll = (position) => {\r\n  showBackTop.value = position.y < -1000\r\n}\r\n\r\n// 滚动结束事件派发\r\nconst afterScroll = () => {\r\n  // console.log('结束了滚动');\r\n}\r\n\r\nconst scrollRef = ref(null)\r\nconst backToTop = () => scrollRef.value.scrollTo(0, 0, 800) // x轴, y轴, 时间\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.home {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.not-more {\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: center;\r\n  color: #999;\r\n  font-size: 13px;\r\n  padding: 18px;\r\n}\r\n</style>\r\n","import script from \"./Home.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Home.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=706e18ab&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-706e18ab\"]])\n\nexport default __exports__"],"names":["homePage","request","url","getHomeData","type","pageNum","params","pageSize","class","_createElementVNode","_hoisted_2","_hoisted_3","_createElementBlock","_hoisted_4","script","__exports__","render","router","useRouter","goSearch","push","goHome","goDetail","item","name","key","id","store","useStore","homeData","reactive","swipers","icons","seckills","recommends","loading","products","list","onMounted","async","token","getItem","dispatch","message","forbidClick","data","banners","catitems","newcomers","getHomeProducts","scrollTop","loadMore","more","ref","then","res","goodsList","length","value","scrollRef","finishPullUp","showBackTop","listenScroll","position","y","afterScroll","backToTop","scrollTo"],"sourceRoot":""}