"use strict";(self["webpackChunkmall"]=self["webpackChunkmall"]||[]).push([[2],{7535:function(t,e,n){n.d(e,{E7:function(){return i},LV:function(){return o},MH:function(){return s},NW:function(){return r},QN:function(){return a},hi:function(){return c}});var l=n(4471);const o=t=>l.Z.post("/orders",t),a=t=>l.Z.get(`/orders?status=${t.status}`),s=(t,e)=>l.Z.patch(`/orders/${t}/updateAddr/${e}`),i=(t,e)=>(0,l.Z)({url:`/orders/${t}`,method:"PATCH",data:{status:e}}),r=t=>(0,l.Z)({url:`/orders/selecOrder?orderId=${t}`}),c=t=>l.Z["delete"](`/orders/delete/${t}`)},6899:function(t,e,n){n.d(e,{Z:function(){return m}});var l=n(3396);const o={class:"nav-bar"},a={class:"nav-left"},s={class:"nav-center"},i=(0,l.Uk)("标题"),r={class:"nav-right"};function c(t,e){return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",a,[(0,l.WI)(t.$slots,"left",{},void 0,!0)]),(0,l._)("div",s,[(0,l.WI)(t.$slots,"center",{},(()=>[i]),!0)]),(0,l._)("div",r,[(0,l.WI)(t.$slots,"right",{},void 0,!0)])])}var u=n(89);const d={},f=(0,u.Z)(d,[["render",c],["__scopeId","data-v-6887fa4f"]]);var m=f},6659:function(t,e,n){n.r(e),n.d(e,{default:function(){return R}});n(767);var l=n(7619),o=(n(1643),n(1514)),a=n(3396),s=n(4870),i=n(678),r=n(6899);const c=t=>((0,a.dD)("data-v-0324b8d8"),t=t(),(0,a.Cn)(),t),u=c((()=>(0,a._)("i",{class:"iconfont icon-arrow-left"},null,-1))),d=[u],f=c((()=>(0,a._)("span",null,"我的订单",-1)));var m={setup(t){const e=(0,i.tv)(),n=()=>e.back();return(t,e)=>((0,a.wg)(),(0,a.j4)((0,s.SU)(r.Z),null,{left:(0,a.w5)((()=>[(0,a._)("div",{class:"nav-left",onClick:n},d)])),center:(0,a.w5)((()=>[f])),_:1}))}},v=n(89);const g=(0,v.Z)(m,[["__scopeId","data-v-0324b8d8"]]);var p=g,w=n(7139),h=n(9242);const B=t=>((0,a.dD)("data-v-7e19c828"),t=t(),(0,a.Cn)(),t),b={class:"order-item-header"},k=B((()=>(0,a._)("div",{class:"left"},[(0,a._)("span",null,"官方自营旗舰店"),(0,a._)("i",{class:"iconfont icon-arrow-right"})],-1))),y={class:"right"},C={class:"left"},_={class:"goods-img"},D=["src"],S={class:"name-price"},O={class:"title"},W={class:"price"},Z={class:"right"},x={class:"order-item-footer"},H={class:"left"},T=(0,a.Uk)(" 共"),U=(0,a.Uk)("件商品 "),I={class:"right"},z=["onClick"],N=["onClick"];var $={props:{list:{type:Array,default:()=>[]}},emits:["deleteOrder"],setup(t,{expose:e,emit:n}){const l=t=>JSON.parse(t),o=t=>{switch(t){case 1:return"待付款";case 3:return"待发货";case 4:return"支付失败";default:break}},i=t=>n("deleteOrder",t),r=(0,s.iH)(""),c=t=>r.value=t,u=t=>{};return e({tabName:c}),(e,n)=>((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.list,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"order-item"},[(0,a._)("div",b,[k,(0,a._)("div",y,(0,w.zw)(o(t.status)),1)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l(t.goods_info),(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.cartId,class:"order-item-content"},[(0,a._)("div",C,[(0,a._)("div",_,[(0,a._)("img",{src:t.small_image,alt:"",srcset:""},null,8,D)]),(0,a._)("div",S,[(0,a._)("div",O,(0,w.zw)(t.name),1),(0,a._)("div",W,"￥"+(0,w.zw)(t.price),1)])]),(0,a._)("div",Z,[(0,a._)("p",null,"×"+(0,w.zw)(t.num),1)])])))),128)),(0,a._)("div",x,[(0,a._)("div",H,[T,(0,a._)("span",null,(0,w.zw)(l(t.goods_info).length),1),U]),(0,a._)("div",I,[(0,a._)("div",{onClick:e=>i(t.id)},"删除订单",8,z),(0,a.wy)((0,a._)("div",{onClick:e=>u(t.id)},"立即付款",8,N),[[h.F8,1===r.value]]),(0,a.wy)((0,a._)("div",null,"提醒发货",512),[[h.F8,3===r.value]])])])])))),128))}};const j=(0,v.Z)($,[["__scopeId","data-v-7e19c828"]]);var A=j,F=n(7535);const P=t=>((0,a.dD)("data-v-321f8090"),t=t(),(0,a.Cn)(),t),K={class:"my-order"},V={key:0},q={class:"order-container"},E={key:1,class:"s_null"},J=P((()=>(0,a._)("p",{class:"tip"},"该分类暂无订单",-1))),G=P((()=>(0,a._)("p",{class:"small"},"换一个试试吧～",-1))),Q=[J,G],Y=(0,a.Uk)(" 正在拼命加载中… ");var L={setup(t){const e=(0,s.qj)({key:"",loading:!0}),{key:n,loading:i}=(0,s.BK)(e),r=(0,s.qj)([{title:"全部",value:""},{title:"待付款",value:1},{title:"待发货",value:3},{title:"待收货",value:4},{title:"待评价",value:5},{title:"退款/售后",value:6}]),c=(0,s.iH)([]),u=async()=>{const t=await(0,F.QN)({status:e.key});c.value=t.data.list,e.loading=!1};u();const d=async t=>{o.Z.confirm({message:"确认要删除该订单?"}).then((async()=>{const e=await(0,F.hi)(t);e.success&&((0,l.Z)(e.msg),u())})).catch((()=>{}))},f=(0,s.iH)(null),m=t=>{e.key=t.name,6!==e.key?(e.loading=!0,u().then((()=>{0!==c.value.length&&f.value.tabName(e.key)}))):c.value=[]};return(t,e)=>{const l=(0,a.up)("van-tab"),o=(0,a.up)("van-tabs"),u=(0,a.up)("van-loading");return(0,a.wg)(),(0,a.iD)("div",K,[(0,a.Wm)((0,s.SU)(p)),(0,a.Wm)(o,{modelValue:(0,s.SU)(n),"onUpdate:modelValue":e[0]||(e[0]=t=>(0,s.dq)(n)?n.value=t:null),color:"#e9232c","title-active-color":"#e9232c",class:"order-tab",onClickTab:m},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(r),(t=>((0,a.wg)(),(0,a.j4)(l,{key:t.id,title:t.title,name:t.value},null,8,["title","name"])))),128))])),_:1},8,["modelValue"]),(0,s.SU)(i)?((0,a.wg)(),(0,a.j4)(u,{key:1,type:"spinner",style:{position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)"}},{default:(0,a.w5)((()=>[Y])),_:1})):((0,a.wg)(),(0,a.iD)("div",V,[(0,a._)("div",q,[c.value.length>0?((0,a.wg)(),(0,a.j4)((0,s.SU)(A),{key:0,ref_key:"order",ref:f,list:c.value,onDeleteOrder:d},null,8,["list"])):((0,a.wg)(),(0,a.iD)("div",E,Q))])]))])}}};const M=(0,v.Z)(L,[["__scopeId","data-v-321f8090"]]);var R=M},1514:function(t,e,n){n.d(e,{Z:function(){return P}});var l=n(3396),o=n(2220),a=n(1404),s=n(7548),i=n(4870),r=n(9242),c=n(610),u=n(5323),d=n(9951),f=n(6491),m=n(5322),v=n(8332),g=n(4877),p=n(6305),w=n(9545),h=n(253);const[B,b]=(0,c["do"])("action-bar"),k=Symbol(B),y={safeAreaInsetBottom:u.J5};var C=(0,l.aZ)({name:B,props:y,setup(t,{slots:e}){const{linkChildren:n}=(0,h.$E)(k);return n(),()=>{var n;return(0,l.Wm)("div",{class:[b(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[null==(n=e.default)?void 0:n.call(e)])}}});const _=(0,a.n)(C);var D=n(3444),S=n(6014);const[O,W]=(0,c["do"])("action-bar-button"),Z=(0,o.l7)({},S.g2,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var x=(0,l.aZ)({name:O,props:Z,setup(t,{slots:e}){const n=(0,S.yj)(),{parent:o,index:a}=(0,h.NB)(k),s=(0,l.Fl)((()=>{if(o){const t=o.children[a.value-1];return!(t&&"isButton"in t)}})),i=(0,l.Fl)((()=>{if(o){const t=o.children[a.value+1];return!(t&&"isButton"in t)}}));return(0,D.F)({isButton:!0}),()=>{const{type:o,icon:a,text:r,color:c,loading:u,disabled:d}=t;return(0,l.Wm)(w.z,{class:W([o,{last:i.value,first:s.value}]),size:"large",type:o,icon:a,color:c,loading:u,disabled:d,onClick:n},{default:()=>[e.default?e.default():r]})}}});const H=(0,a.n)(x);const[T,U,I]=(0,c["do"])("dialog"),z=(0,o.l7)({},g.W,{title:String,theme:String,width:u.Or,message:[String,Function],callback:Function,allowHtml:Boolean,className:u.Vg,transition:(0,u.SQ)("van-dialog-bounce"),messageAlign:String,closeOnPopstate:u.J5,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:u.J5,closeOnClickOverlay:Boolean}),N=[...g.m,"transition","closeOnPopstate"];var $=(0,l.aZ)({name:T,props:z,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:e,slots:n}){const a=(0,i.iH)(),s=(0,i.qj)({confirm:!1,cancel:!1}),c=t=>e("update:show",t),u=e=>{var n;c(!1),null==(n=t.callback)||n.call(t,e)},g=n=>()=>{t.show&&(e(n),t.beforeClose?(s[n]=!0,(0,d.I)(t.beforeClose,{args:[n],done(){u(n),s[n]=!1},canceled(){s[n]=!1}})):u(n))},h=g("cancel"),B=g("confirm"),b=(0,r.D2)((n=>{var l,s;if(n.target!==(null==(s=null==(l=a.value)?void 0:l.popupRef)?void 0:s.value))return;const i={Enter:t.showConfirmButton?B:o.ZT,Escape:t.showCancelButton?h:o.ZT};i[n.key](),e("keydown",n)}),["enter","esc"]),k=()=>{const e=n.title?n.title():t.title;if(e)return(0,l.Wm)("div",{class:U("header",{isolated:!t.message&&!n.default})},[e])},y=e=>{const{message:n,allowHtml:o,messageAlign:a}=t,s=U("message",{"has-title":e,[a]:a}),i=(0,f.mf)(n)?n():n;return o&&"string"===typeof i?(0,l.Wm)("div",{class:s,innerHTML:i},null):(0,l.Wm)("div",{class:s},[i])},C=()=>{if(n.default)return(0,l.Wm)("div",{class:U("content")},[n.default()]);const{title:e,message:o,allowHtml:a}=t;if(o){const t=!(!e&&!n.title);return(0,l.Wm)("div",{key:a?1:0,class:U("content",{isolated:!t})},[y(t)])}},D=()=>(0,l.Wm)("div",{class:[m.k7,U("footer")]},[t.showCancelButton&&(0,l.Wm)(w.z,{size:"large",text:t.cancelButtonText||I("cancel"),class:U("cancel"),style:{color:t.cancelButtonColor},loading:s.cancel,disabled:t.cancelButtonDisabled,onClick:h},null),t.showConfirmButton&&(0,l.Wm)(w.z,{size:"large",text:t.confirmButtonText||I("confirm"),class:[U("confirm"),{[m.a8]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:s.confirm,disabled:t.confirmButtonDisabled,onClick:B},null)]),S=()=>(0,l.Wm)(_,{class:U("footer")},{default:()=>[t.showCancelButton&&(0,l.Wm)(H,{type:"warning",text:t.cancelButtonText||I("cancel"),class:U("cancel"),color:t.cancelButtonColor,loading:s.cancel,disabled:t.cancelButtonDisabled,onClick:h},null),t.showConfirmButton&&(0,l.Wm)(H,{type:"danger",text:t.confirmButtonText||I("confirm"),class:U("confirm"),color:t.confirmButtonColor,loading:s.confirm,disabled:t.confirmButtonDisabled,onClick:B},null)]}),O=()=>n.footer?n.footer():"round-button"===t.theme?S():D();return()=>{const{width:e,title:n,theme:s,message:i,className:r}=t;return(0,l.Wm)(p.G,(0,l.dG)({ref:a,role:"dialog",class:[U([s]),r],style:{width:(0,v.Nn)(e)},tabindex:0,"aria-labelledby":n||i,onKeydown:b,"onUpdate:show":c},(0,o.ei)(t,N)),{default:()=>[k(),C(),O()]})}}});let j;function A(){const t={setup(){const{state:t,toggle:e}=(0,s.o)();return()=>(0,l.Wm)($,(0,l.dG)(t,{"onUpdate:show":e}),null)}};({instance:j}=(0,s.H)(t))}function F(t){return o._f?new Promise(((e,n)=>{j||A(),j.open((0,o.l7)({},F.currentOptions,t,{callback:t=>{("confirm"===t?e:n)(t)}}))})):Promise.resolve()}F.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},F.currentOptions=(0,o.l7)({},F.defaultOptions),F.alert=F,F.confirm=t=>F((0,o.l7)({showCancelButton:!0},t)),F.close=()=>{j&&j.toggle(!1)},F.setDefaultOptions=t=>{(0,o.l7)(F.currentOptions,t)},F.resetDefaultOptions=()=>{F.currentOptions=(0,o.l7)({},F.defaultOptions)},F.Component=(0,a.n)($),F.install=t=>{t.use(F.Component),t.config.globalProperties.$dialog=F};var P=F},1643:function(t,e,n){n(1958),n(368),n(6742),n(2939),n(1452),n(6196),n(2666)}}]);
//# sourceMappingURL=2.32130b51.js.map