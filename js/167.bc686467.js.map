{"version":3,"file":"js/167.bc686467.js","mappings":"8aAcA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAASC,EAAAA,EAAAA,OACT,MAAEC,EAAF,OAASC,IAAWC,EAAAA,EAAAA,MAC1BD,EAAO,uBACP,MAAME,EAAU,GAChBH,EAAMI,KAAKC,UAAUC,SAASC,IAC5BJ,EAAQK,KAAKD,EAAQE,WAGvB,MAAMC,GAAYC,EAAAA,EAAAA,KAAI,GAChBC,EAAO,CACXC,aAAcjB,EAAOkB,MAAMD,aAC3BE,SAAUnB,EAAOkB,MAAMC,UAEnBC,EAAaC,UACjB,MAAMC,QAAYC,EAAAA,EAAAA,GAAeP,GACjC,GAAIM,EAAIE,SAAuB,GAAZF,EAAIG,KAAW,CAChC,MAAMH,QAAYI,EAAAA,EAAAA,IAASnB,GACvBe,EAAIE,SAAStB,EAAOU,KAAK,cAE7BE,EAAUa,OAAQ,G,OAGtBP,I,4HC/BA,MAAMQ,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://mall/./src/views/order/Payment.vue","webpack://mall/./src/views/order/Payment.vue?5adb"],"sourcesContent":["<template>\r\n  <div class=\"pay-res\">\r\n    <div v-if=\"payStatus\"><h2>支付成功, 即将跳转支付前界面...</h2></div>\r\n    <div v-else><h2>支付失败</h2></div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { successPayment } from '@/api/pay'\r\nimport { delCarts } from '@/api/cart'\r\n\r\nconst routes = useRoute()\r\nconst router = useRouter()\r\nconst { state, commit } = useStore()\r\ncommit('cart/INIT_SHOP_CART')\r\nconst cartIds = []\r\nstate.cart.selectArr.forEach((element) => {\r\n  cartIds.push(element.cartId)\r\n})\r\n\r\nconst payStatus = ref(true)\r\nconst data = {\r\n  out_trade_no: routes.query.out_trade_no,\r\n  trade_no: routes.query.trade_no\r\n}\r\nconst paymentRes = async () => {\r\n  const res = await successPayment(data)\r\n  if (res.success && res.code == 2) {\r\n    const res = await delCarts(cartIds) // 删除购物车商品\r\n    if (res.success) router.push('/home')\r\n  } else {\r\n    payStatus.value = false\r\n  }\r\n}\r\npaymentRes()\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.pay-res {\r\n  text-align: center;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n","import script from \"./Payment.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Payment.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Payment.vue?vue&type=style&index=0&id=e0ba0994&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e0ba0994\"]])\n\nexport default __exports__"],"names":["routes","useRoute","router","useRouter","state","commit","useStore","cartIds","cart","selectArr","forEach","element","push","cartId","payStatus","ref","data","out_trade_no","query","trade_no","paymentRes","async","res","successPayment","success","code","delCarts","value","__exports__"],"sourceRoot":""}