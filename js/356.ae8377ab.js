"use strict";(self["webpackChunkmall"]=self["webpackChunkmall"]||[]).push([[356],{170:function(a,n,t){t.d(n,{Fg:function(){return s},Ho:function(){return r},RM:function(){return o},Rh:function(){return d},p6:function(){return l}});var e=t(4471);const s=a=>(0,e.Z)({url:"/address"}),l=a=>(0,e.Z)({url:"/address",method:"POST",data:a}),r=a=>(0,e.Z)({url:`/address/${a}`,method:"DELETE"}),o=({id:a,user_id:n,country:t,...s})=>(0,e.Z)({url:`/address/${a}`,method:"PUT",data:s}),d=a=>(0,e.Z)({url:`/address/${a}`,method:"PATCH"})},7535:function(a,n,t){t.d(n,{E7:function(){return o},LV:function(){return s},MH:function(){return r},NW:function(){return d},QN:function(){return l},hi:function(){return i}});var e=t(4471);const s=a=>e.Z.post("/orders",a),l=a=>e.Z.get(`/orders?status=${a.status}`),r=(a,n)=>e.Z.patch(`/orders/${a}/updateAddr/${n}`),o=(a,n)=>(0,e.Z)({url:`/orders/${a}`,method:"PATCH",data:{status:n}}),d=a=>(0,e.Z)({url:`/orders/selecOrder?orderId=${a}`}),i=a=>e.Z["delete"](`/orders/delete/${a}`)},3583:function(a,n,t){t.r(n),t.d(n,{default:function(){return ua}});var e=t(3396),s=t(4870),l=t(678),r=t(6443),o=t(6899);const d=a=>((0,e.dD)("data-v-3711dac1"),a=a(),(0,e.Cn)(),a),i=d((()=>(0,e._)("i",{class:"iconfont icon-arrow-left"},null,-1))),c=[i],u=d((()=>(0,e._)("span",null,"确认订单",-1)));var p={setup(a){const n=(0,l.tv)(),t=()=>n.back();return(a,n)=>((0,e.wg)(),(0,e.j4)((0,s.SU)(o.Z),null,{left:(0,e.w5)((()=>[(0,e._)("div",{class:"nav-left",onClick:t},c)])),center:(0,e.w5)((()=>[u])),_:1}))}},v=t(89);const _=(0,v.Z)(p,[["__scopeId","data-v-3711dac1"]]);var f=_,g=t(7139),w=t(7535);const m=a=>((0,e.dD)("data-v-4c8d92b0"),a=a(),(0,e.Cn)(),a),y={key:0,class:"address"},h={class:"left"},S=m((()=>(0,e._)("span",{class:"iconfont icon-map"},null,-1))),U=m((()=>(0,e._)("div",{class:"left"},[(0,e._)("span",{class:"iconfont icon-tianjia"}),(0,e._)("span",null,"选择收货地址")],-1))),Z=m((()=>(0,e._)("span",{class:"iconfont icon-arrow-right"},null,-1))),k=[U,Z];var D={props:{addrData:{type:Object},orderId:String,loading:Boolean},setup(a){const n=a,t=(0,l.tv)(),o=()=>t.push({path:"/address",query:{type:"select"}}),d=(0,e.Fl)((()=>n.addrData.filter((a=>!0===a.isDefault))[0])),i=(0,e.Fl)((()=>{const{province:a,city:n,county:t,addressDetail:e}=d.value;return a+" "+n+" "+t+" "+e}));return n.addrData&&d.value&&(0,w.MH)(n.orderId,d.value.id),(n,t)=>{const l=(0,e.up)("van-skeleton");return(0,e.wg)(),(0,e.j4)((0,s.SU)(r.Zb),{title:"收货地址"},{default:(0,e.w5)((()=>[(0,e.Wm)(l,{title:"",avatar:"",row:2,loading:a.loading},{default:(0,e.w5)((()=>[a.addrData&&(0,s.SU)(d)?((0,e.wg)(),(0,e.iD)("div",y,[(0,e._)("div",h,[S,(0,e._)("div",null,[(0,e._)("span",null,(0,g.zw)((0,s.SU)(d).name),1),(0,e._)("span",null,(0,g.zw)((0,s.SU)(d).tel),1),(0,e._)("p",null,(0,g.zw)((0,s.SU)(i)),1)])]),(0,e._)("span",{class:"iconfont icon-arrow-right",onClick:o})])):((0,e.wg)(),(0,e.iD)("div",{key:1,class:"selectAddr",onClick:o},k))])),_:1},8,["loading"])])),_:1})}}};const b=(0,v.Z)(D,[["__scopeId","data-v-4c8d92b0"]]);var C=b;const I=a=>((0,e.dD)("data-v-d054235c"),a=a(),(0,e.Cn)(),a),z={class:"left"},H=["src"],W={class:"right"},j={class:"text"},x=I((()=>(0,e._)("div",{class:"text_2"},[(0,e._)("span",null,"黑色"),(0,e._)("span",null,"L码")],-1))),$={class:"price_line"},A={class:"price_one"},N=I((()=>(0,e._)("span",null,"￥",-1)));var T={props:{goodsList:{type:Array,default:()=>[]},loading:Boolean},setup(a){return(n,t)=>{const l=(0,e.up)("van-skeleton");return(0,e.wg)(),(0,e.j4)((0,s.SU)(r.Zb),{title:"商品信息"},{default:(0,e.w5)((()=>[(0,e.Wm)(l,{title:"",avatar:"",row:2,loading:a.loading},{default:(0,e.w5)((()=>[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(a.goodsList,((a,n)=>((0,e.wg)(),(0,e.iD)("div",{key:n,class:"goods"},[(0,e._)("div",z,[(0,e._)("img",{src:a.small_image,alt:""},null,8,H)]),(0,e._)("div",W,[(0,e._)("div",j,[(0,e._)("span",null,(0,g.zw)(a.name),1),(0,e._)("span",null,"x "+(0,g.zw)(a.num),1)]),x,(0,e._)("div",$,[(0,e._)("div",A,[N,(0,e._)("span",null,(0,g.zw)(a.price),1)])])])])))),128))])),_:1},8,["loading"])])),_:1})}}};const E=(0,v.Z)(T,[["__scopeId","data-v-d054235c"]]);var P=E,L=(t(767),t(7619)),O=t(65),R=t(596);const F=a=>((0,e.dD)("data-v-f1718330"),a=a(),(0,e.Cn)(),a),q={class:"footer"},M={class:"pay_one"},B=(0,e.Uk)(" 合计:  "),K=F((()=>(0,e._)("span",null,"￥",-1))),Y={class:"pay_two"};var J={props:{orderId:String,addr:Number},setup(a){const n=a,{state:t,getters:l,commit:r}=(0,O.oR)();r("cart/INIT_SHOP_CART");const o=[],d=[];t.cart.selectArr.forEach((a=>{o.push(a.name),d.push(a.cartId)}));const i=async()=>{if(0===n.addr)return void(0,L.Z)("请先选择收货地址后再支付");const a=await(0,w.E7)(n.orderId,2);if(a.success){const a={orderId:parseInt(n.orderId),price:"0.1",name:t.cart.selectArr[0].name,returnUrl:"http://106.52.197.60"},e=await(0,R.m)(a);e.success&&(window.location.href=e.data.paymentUrl)}};return(a,n)=>((0,e.wg)(),(0,e.iD)("div",q,[(0,e._)("div",M,[B,K,(0,e._)("span",null,(0,g.zw)((0,s.SU)(l)["cart/totalPrice"]),1)]),(0,e._)("div",Y,[(0,e._)("p",{onClick:i},"提交订单("+(0,g.zw)((0,s.SU)(l)["cart/selectedNumber"])+")",1)])]))}};const Q=(0,v.Z)(J,[["__scopeId","data-v-f1718330"]]);var V=Q;const X=["onClick"],G={class:"left"},aa={class:"right"};var na={setup(a){const n=(0,s.qj)([{id:1,name:"微信支付",icon:"icon-weixinzhifu wx"},{id:2,name:"支付宝支付",icon:"icon-zhifubao zfb"},{id:3,name:"余额支付",icon:"icon-yue ye"}]),t=(0,s.iH)(1),l=a=>{t.value=a,1===a||(0,L.Z)("暂时只支持支付宝支付")};return(a,o)=>((0,e.wg)(),(0,e.j4)((0,s.SU)(r.Zb),{title:"支付方式"},{default:(0,e.w5)((()=>[(0,e._)("ul",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)((0,s.SU)(n),((a,n)=>((0,e.wg)(),(0,e.iD)("li",{key:n,class:"ctn-item",onClick:a=>l(n)},[(0,e._)("div",G,[(0,e._)("i",{class:(0,g.C_)(["iconfont",a.icon])},null,2),(0,e._)("span",null,(0,g.zw)(a.name),1)]),(0,e._)("div",aa,[(0,e._)("i",{class:(0,g.C_)(["iconfont icon-yuanxingweixuanzhong",t.value===n?"icon-yuanxingxuanzhongfill":""])},null,2)])],8,X)))),128))])])),_:1}))}};const ta=(0,v.Z)(na,[["__scopeId","data-v-f4d6897c"]]);var ea=ta,sa=t(170);const la={class:"layout"},ra={key:0},oa={class:"content"},da=(0,e.Uk)(" 正在拼命加载中… ");var ia={setup(a){const n=(0,l.yj)(),t=n.query.orderId,o=(0,s.iH)([]),d=(0,s.iH)([]),i=(0,s.iH)(!0);return(0,e.bv)((async()=>{const a=await(0,sa.Fg)();o.value=a.data;const n=await(0,w.NW)(t);d.value=JSON.parse(n.data.goods_info),i.value=!1})),(a,n)=>{const l=(0,e.up)("van-loading");return(0,e.wg)(),(0,e.iD)("div",la,[(0,e.Wm)((0,s.SU)(f)),(0,e.Wm)((0,s.SU)(r.Xs),{ref:"scrollRef",class:"scroll",bounce:{top:!1,bottom:!1}},{default:(0,e.w5)((()=>[i.value?((0,e.wg)(),(0,e.j4)(l,{key:1,type:"spinner",style:{position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)"}},{default:(0,e.w5)((()=>[da])),_:1})):((0,e.wg)(),(0,e.iD)("div",ra,[(0,e._)("div",oa,[(0,e.Wm)((0,s.SU)(C),{"addr-data":o.value,"order-id":(0,s.SU)(t),loading:i.value},null,8,["addr-data","order-id","loading"]),(0,e.Wm)((0,s.SU)(P),{"goods-list":d.value,loading:i.value},null,8,["goods-list","loading"]),(0,e.Wm)((0,s.SU)(ea))])]))])),_:1},512),(0,e.Wm)((0,s.SU)(V),{"order-id":(0,s.SU)(t),addr:o.value.length},null,8,["order-id","addr"])])}}};const ca=ia;var ua=ca}}]);
//# sourceMappingURL=356.ae8377ab.js.map