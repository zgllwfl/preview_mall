{"version":3,"file":"js/110.6a414f81.js","mappings":"0VA4BA,MAAMA,GAAWC,EAAAA,EAAAA,IAAS,CACxBC,KAAM,IACNC,SAAU,GACVC,YAAa,GACbC,cAAe,GACfC,WAAY,KAGRC,GAAUC,EAAAA,EAAAA,IAAI,MACdC,EAAWC,UACf,MAAM,YAAEN,EAAF,cAAeC,GAAkBL,EACjCW,EAAYJ,EAAQK,MAAMC,aAAcC,EAAAA,EAAAA,IAAgBV,EAAaC,GAC3E,GAAIM,EAAW,CACb,MAAMP,GAAcW,EAAAA,EAAAA,GAAQf,EAASI,aAC/BC,GAAgBU,EAAAA,EAAAA,GAAQf,EAASK,eACjCC,GAAaS,EAAAA,EAAAA,GAAQf,EAASM,YAC9BU,EAAOC,OAAOC,OAAO,GAAIlB,GAC/BgB,EAAKZ,YAAcA,EACnBY,EAAKX,cAAgBA,EACrBW,EAAKV,WAAaA,EAClB,MAAMa,QAAYC,EAAAA,EAAAA,IAAeJ,GAC7BG,GAAKE,WACP,OAAMF,EAAIG,MACVC,EAAAA,EAAAA,MACAC,EAAOC,KAAK,CACVC,KAAM,QACNC,OAAQ,CACNxB,SAAUgB,GAAKS,MAAMzB,eAOzBqB,GAASK,EAAAA,EAAAA,MACTC,EAAU,IAAMN,EAAOC,KAAK,UAC5BM,EAAa,IAAMP,EAAOC,KAAK,a,6xBC1DrC,MAAMO,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://mall/./src/views/login/ResetPassword.vue","webpack://mall/./src/views/login/ResetPassword.vue?3b5a"],"sourcesContent":["<template>\r\n  <div class=\"login-bg\">\r\n    <NavBar title=\"重置密码\"></NavBar>\r\n    <div class=\"login\">\r\n      <sms-login ref=\"CodeRef\" :form-data=\"formData\"></sms-login>\r\n      <Input v-model.trim=\"formData.newPassword\" placeholder=\"输入新密码\" type=\"password\" />\r\n      <Input v-model.trim=\"formData.reNewPassword\" placeholder=\"确认新密码\" type=\"password\" />\r\n      <button class=\"common-btn\" @click=\"resetPwd\">确认重置</button>\r\n      <div class=\"login-bottom\">\r\n        <span @click=\"goLogin\">立即登录</span> |\r\n        <span @click=\"goRegister\">快速注册</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { Toast } from 'vant'\r\nimport NavBar from './components/NavBar'\r\nimport SmsLogin from './components/SmsLogin'\r\nimport Input from 'components/Input/Input'\r\nimport { confirmPassword } from '@/utils/validate'\r\nimport { removeAllItem } from '@/utils/storage'\r\nimport { encrypt } from '@/utils/encrypt'\r\nimport { changePassword } from '@/api/user'\r\n\r\nconst formData = reactive({\r\n  type: '2',\r\n  username: '',\r\n  newPassword: '',\r\n  reNewPassword: '',\r\n  verifyCode: ''\r\n})\r\n\r\nconst CodeRef = ref(null)\r\nconst resetPwd = async () => {\r\n  const { newPassword, reNewPassword } = formData\r\n  const verifyRes = CodeRef.value.validate() && confirmPassword(newPassword, reNewPassword)\r\n  if (verifyRes) {\r\n    const newPassword = encrypt(formData.newPassword)\r\n    const reNewPassword = encrypt(formData.reNewPassword)\r\n    const verifyCode = encrypt(formData.verifyCode)\r\n    const temp = Object.assign({}, formData)\r\n    temp.newPassword = newPassword\r\n    temp.reNewPassword = reNewPassword\r\n    temp.verifyCode = verifyCode\r\n    const res = await changePassword(temp)\r\n    if (res?.success) {\r\n      Toast(res.msg)\r\n      removeAllItem()\r\n      router.push({\r\n        name: 'Login',\r\n        params: {\r\n          username: res?.data?.username\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nconst router = useRouter()\r\nconst goLogin = () => router.push('/login')\r\nconst goRegister = () => router.push('/register')\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login {\r\n  margin-top: 10%;\r\n  text-align: center;\r\n  position: relative;\r\n  .login-bottom {\r\n    margin-top: 15px;\r\n    font-size: 16px;\r\n    span {\r\n      padding: 5px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./ResetPassword.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ResetPassword.vue?vue&type=style&index=0&id=d333bcc4&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d333bcc4\"]])\n\nexport default __exports__"],"names":["formData","reactive","type","username","newPassword","reNewPassword","verifyCode","CodeRef","ref","resetPwd","async","verifyRes","value","validate","confirmPassword","encrypt","temp","Object","assign","res","changePassword","success","msg","removeAllItem","router","push","name","params","data","useRouter","goLogin","goRegister","__exports__"],"sourceRoot":""}