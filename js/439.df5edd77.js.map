{"version":3,"file":"js/439.df5edd77.js","mappings":"yVAiBMA,EAAW,KAAMC,EAAAA,EAAAA,IAAcC,EAAMC,U,OAE3CC,EAAa,CACXJ,SAAAA,I,waCjBF,MAAMK,EAAc,EAEpB,Q,kICoBA,MAAMF,GAAWG,EAAAA,EAAAA,IAAS,CACxBC,KAAM,IACNC,SAAU,GACVC,WAAY,GACZC,SAAU,KAGNC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MACRC,GAAcC,EAAAA,EAAAA,IAAI,MAClBC,GAAeD,EAAAA,EAAAA,IAAI,MACnBE,GAAcF,EAAAA,EAAAA,KAAI,GAClBG,EAAY,IAAOD,EAAYE,OAASF,EAAYE,MACpDC,EAAQC,MAAAA,IACZ,GAAIC,GAEF,GAAIN,EAAaG,MAAMtB,WAAY,CACjC,MAAM0B,GAAcC,EAAAA,EAAAA,GAAQxB,EAASO,UAC/BkB,EAAaC,OAAOC,OAAO,GAAI3B,GACrCyB,EAAWlB,SAAWgB,EACtB,MAAMK,QAAYC,EAAAA,EAAAA,IAASJ,GACvBG,GAAKE,WACP,OAAMF,EAAIG,KACVnB,EAAMoB,OAAO,gBAAiBJ,EAAIK,MAClCvB,EAAOwB,KAAK,mBAKhB,GAAIpB,EAAYK,MAAMtB,WAAY,CAChC,MAAMS,GAAakB,EAAAA,EAAAA,GAAQxB,EAASM,YAC9BmB,EAAaC,OAAOC,OAAO,GAAI3B,GACrCyB,EAAWnB,WAAaA,EACxB,MAAMsB,QAAYO,EAAAA,EAAAA,IAAcV,GAC5BG,GAAKE,WACP,OAAMF,EAAIG,KACVnB,EAAMoB,OAAO,gBAAiBJ,EAAIK,MAClCvB,EAAOwB,KAAK,eAMhB1B,EAAM4B,QAAQ/B,WAAUL,EAASK,SAAWG,EAAM4B,OAAO/B,UAE7D,MAAMgC,EAAc,IAAM3B,EAAOwB,KAAK,kBAChCI,EAAa,IAAM5B,EAAOwB,KAAK,a,4nBClErC,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,+JCLA,MAAM,EAAc,EAEpB","sources":["webpack://mall/./src/views/login/components/NameLogin.vue","webpack://mall/./src/views/login/components/NameLogin.vue?aa69","webpack://mall/./src/views/login/components/Login.vue","webpack://mall/./src/views/login/components/Login.vue?faa5","webpack://mall/./src/views/login/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-name\">\r\n    <Input v-model.trim=\"formData.username\" placeholder=\"QQ邮箱\"></Input>\r\n    <Input v-model.trim=\"formData.password\" placeholder=\"输入密码\" type=\"password\"></Input>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { validateLogin } from '@/utils/validate'\r\nimport Input from 'components/Input/Input'\r\n\r\nconst props = defineProps({\r\n  formData: {\r\n    type: Object\r\n  }\r\n})\r\n\r\nconst validate = () => validateLogin(props.formData)\r\n\r\ndefineExpose({\r\n  validate\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./NameLogin.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NameLogin.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"login\">\r\n    <name-login v-show=\"isNameLogin\" ref=\"nameLoginRef\" :form-data=\"formData\"></name-login>\r\n    <sms-login v-show=\"!isNameLogin\" ref=\"smsLoginRef\" :form-data=\"formData\"></sms-login>\r\n    <button class=\"common-btn\" @click=\"login(isNameLogin)\">登录</button>\r\n    <div class=\"login-bottom\">\r\n      <div v-show=\"isNameLogin\">\r\n        <span @click=\"loginCode\">验证码登录</span> | <span @click=\"goResetPass\">忘记密码</span> |\r\n        <span @click=\"goRegister\">快速注册</span>\r\n      </div>\r\n      <span v-show=\"!isNameLogin\" @click=\"loginCode\">密码登录</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport { Toast } from 'vant'\r\nimport NameLogin from './NameLogin'\r\nimport SmsLogin from './SmsLogin'\r\nimport { encrypt } from '@/utils/encrypt'\r\nimport { loginApi, authCodeLogin } from '@/api/user'\r\n\r\nconst formData = reactive({\r\n  type: '3',\r\n  username: '',\r\n  verifyCode: '',\r\n  password: ''\r\n})\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst store = useStore()\r\nconst smsLoginRef = ref(null)\r\nconst nameLoginRef = ref(null)\r\nconst isNameLogin = ref(true)\r\nconst loginCode = () => (isNameLogin.value = !isNameLogin.value)\r\nconst login = async (loginType) => {\r\n  if (loginType) {\r\n    // 账号登录\r\n    if (nameLoginRef.value.validate()) {\r\n      const encryptText = encrypt(formData.password)\r\n      const submitForm = Object.assign({}, formData)\r\n      submitForm.password = encryptText\r\n      const res = await loginApi(submitForm)\r\n      if (res?.success) {\r\n        Toast(res.msg)\r\n        store.commit('user/setToken', res.data)\r\n        router.push('/account')\r\n      }\r\n    }\r\n  } else {\r\n    // 验证码登录\r\n    if (smsLoginRef.value.validate()) {\r\n      const verifyCode = encrypt(formData.verifyCode)\r\n      const submitForm = Object.assign({}, formData)\r\n      submitForm.verifyCode = verifyCode\r\n      const res = await authCodeLogin(submitForm)\r\n      if (res?.success) {\r\n        Toast(res.msg)\r\n        store.commit('user/setToken', res.data)\r\n        router.push('/account')\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nif (route.params?.username) formData.username = route.params.username\r\n\r\nconst goResetPass = () => router.push('/resetPassword')\r\nconst goRegister = () => router.push('/register')\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login {\r\n  margin-top: 10%;\r\n  text-align: center;\r\n  position: relative;\r\n  .login-bottom {\r\n    margin-top: 15px;\r\n    font-size: 16px;\r\n    span {\r\n      padding: 5px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=5216ead9&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5216ead9\"]])\n\nexport default __exports__","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["validate","validateLogin","props","formData","expose","__exports__","reactive","type","username","verifyCode","password","route","useRoute","router","useRouter","store","useStore","smsLoginRef","ref","nameLoginRef","isNameLogin","loginCode","value","login","async","loginType","encryptText","encrypt","submitForm","Object","assign","res","loginApi","success","msg","commit","data","push","authCodeLogin","params","goResetPass","goRegister"],"sourceRoot":""}