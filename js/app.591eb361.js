(function(){"use strict";var e={6624:function(e,t,n){n.d(t,{U5:function(){return i},Z5:function(){return o},td:function(){return c},tj:function(){return a},xu:function(){return s}});var r=n(4471);const o=e=>(0,r.Z)({url:"/carts",method:"POST",data:{goods_id:e}}),a=()=>(0,r.Z)("/carts"),i=e=>r.Z["delete"]("/carts",{data:{ids:e}}),s=(e,t)=>(0,r.Z)({url:`/carts/${e}`,method:"PATCH",data:t}),c=e=>r.Z.post("/carts/selectAll",e)},8948:function(e,t,n){n.d(t,{$t:function(){return a},mC:function(){return o},o3:function(){return r}});const r="token",o="timeStamp",a=72e5},3262:function(e,t,n){var r=n(9242),o=(n(1552),n(3396));function a(e,t){const n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(n,null,{default:(0,o.w5)((({Component:t})=>[((0,o.wg)(),(0,o.j4)(o.Ob,null,[e.$route.meta.keepAlive?((0,o.wg)(),(0,o.j4)((0,o.LL)(t),{key:e.$route.name})):(0,o.kq)("",!0)],1024)),e.$route.meta.keepAlive?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)((0,o.LL)(t),{key:e.$route.name}))])),_:1})}var i=n(89);const s={},c=(0,i.Z)(s,[["render",a]]);var u=c,d=n(1120),l=n(2867),f=n(6112),m=(n(1252),n(8101)),p=(n(7748),n(8620)),h=(n(3533),n(2727)),g=(n(645),n(9030)),v=(n(8228),n(2229)),b=(n(9469),n(9345)),C=(n(124),n(3068)),A=(n(6985),n(360)),y=(n(6561),n(2122)),w=(n(3526),n(598));function E(e){e.use(w.Z),e.use(y.Z),e.use(A.Z),e.use(C.Z),e.use(b.Z),e.use(v.Z),e.use(g.Z),e.use(h.Z),e.use(p.Z),e.use(m.Z)}var O=n(9672),k=n.n(O);"addEventListener"in document&&document.addEventListener("DOMContentLoaded",(function(){k().attach(document.body)}),!1);const I=(0,r.ri)(u);I.use(l.Z).use(d.Z).use(f.Z,{preLoad:1.3,error:n(6023),loading:n(4054),attempt:1}).mount("#app"),E(I)},1120:function(e,t,n){var r=n(678),o=n(7247);const a=[{path:"/",redirect:"/home"},{path:"/home",name:"Home",meta:{title:"首页",keepAlive:!0},component:()=>Promise.all([n.e(877),n.e(975),n.e(736),n.e(553)]).then(n.bind(n,4965))},{path:"/category",name:"Category",meta:{title:"分类",keepAlive:!0},component:()=>Promise.all([n.e(877),n.e(124)]).then(n.bind(n,6170))},{path:"/categoryDetail/:key/:id",name:"categoryDetail",component:()=>Promise.all([n.e(877),n.e(165)]).then(n.bind(n,6841))},{path:"/cart",name:"Cart",meta:{title:"购物车"},component:()=>Promise.all([n.e(440),n.e(217)]).then(n.bind(n,2574))},{path:"/account",name:"Account",meta:{title:"我的"},component:()=>n.e(679).then(n.bind(n,3679))},{path:"/search",name:"Search",component:()=>n.e(523).then(n.bind(n,1523)),children:[{path:"/search",name:"searchIndex",component:()=>Promise.all([n.e(440),n.e(188)]).then(n.bind(n,9188))},{path:"list",name:"list",component:()=>Promise.all([n.e(877),n.e(270)]).then(n.bind(n,9082))}]},{path:"/detail",name:"Detail",component:()=>Promise.all([n.e(877),n.e(975),n.e(736),n.e(457)]).then(n.bind(n,718))},{path:"/address",name:"index",component:()=>n.e(690).then(n.bind(n,9690)),children:[{path:"/address",name:"Address",component:()=>Promise.all([n.e(440),n.e(672)]).then(n.bind(n,672))},{path:"/edit",name:"AddressEdit",component:()=>n.e(979).then(n.bind(n,6979))}]},{path:"/login",name:"Login",component:()=>Promise.all([n.e(975),n.e(470),n.e(439)]).then(n.bind(n,5707))},{path:"/register",name:"Register",component:()=>Promise.all([n.e(975),n.e(470),n.e(982)]).then(n.bind(n,850))},{path:"/resetPassword",name:"resetPassword",component:()=>Promise.all([n.e(975),n.e(470),n.e(110)]).then(n.bind(n,8384))},{path:"/order",name:"Order",component:()=>Promise.all([n.e(877),n.e(975),n.e(736),n.e(596),n.e(356)]).then(n.bind(n,3583))},{path:"/myOrder",name:"MyOrder",component:()=>Promise.all([n.e(440),n.e(2)]).then(n.bind(n,6659))},{path:"/payment",name:"Payment",component:()=>Promise.all([n.e(596),n.e(167)]).then(n.bind(n,3167))}],i=(0,r.p7)({history:(0,r.r5)(),routes:a});i.beforeEach(((e,t,n)=>{e.meta.title?document.title=e.meta.title:document.title="商城";const r=["Payment","Cart","Order","Address","AddressEdit"],a=(0,o.rV)("user_info");r.indexOf(e.name)>=0&&(a||i.push("/login")),n()})),t["Z"]=i},2867:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(65);const o={token:e=>e.user.token,userInfo:e=>e.user.userInfo,hasUserInfo:e=>"{}"!==JSON.stringify(e.user.userInfo)};var a=o,i=n(8948),s=n(1120),c=n(7247),u=n(1836),d={namespaced:!0,state:()=>({token:(0,c.rV)(i.o3)||"",userInfo:{loginStatus:!1,username:""}}),mutations:{setToken(e,t){e.userInfo.loginStatus=!0,e.userInfo.username=t.username,e.token=t.token,(0,c.LS)(i.o3,t.token),(0,c.LS)("user_info",e.userInfo),(0,u.Dy)()},loginOut(e){e.userInfo.loginStatus=!1,e.userInfo.username=null,e.token=null,(0,c.yZ)(),s.Z.push("/login")}},actions:{}};const l="ADD_GOODS",f="INIT_SHOP_CART",m="REDUCE_CART",p="REMOVE_CART",h="SELECTED_SINGLE_GOODS",g="SELECTED_ALL_GOODS",v="CLEAR_CART",b="INIT_OREDER";var C=n(6624),A={namespaced:!0,state:{shopCart:{},cartCount:0,selectArr:[]},mutations:{[l](e,{cartId:t,goodsId:n,name:r,small_image:o,price:a}){const i=e.shopCart;i[n]||(i[n]={num:1,goodsId:n,cartId:t,name:r,small_image:o,price:a,checked:!0}),e.shopCart={...i},(0,c.LS)("shopCart",e.shopCart),this.commit("cart/INIT_SHOP_CART")},[f](e){const t=(0,c.rV)("shopCart");t&&(e.shopCart=t,e.cartCount=Object.getOwnPropertyNames(e.shopCart).length,e.selectArr=Object.values(e.shopCart).filter((e=>e.checked)))},[m](e,{goodsId:t}){const n=e.shopCart,r=n[t];r&&(e.shopCart={...n},(0,c.LS)("shopCart",e.shopCart))},[p](e,{goodsId:t}){const n=e.shopCart,r=n[t];"object"===typeof t?t.forEach((e=>{delete n[e]})):r&&delete n[t],e.shopCart={...n},(0,c.LS)("shopCart",e.shopCart),this.commit("cart/INIT_SHOP_CART")},[h](e,{goodsId:t}){const n=e.shopCart,r=n[t];r&&(r.checked?r.checked=!r.checked:r.checked=!0,e.shopCart={...n},(0,c.LS)("shopCart",e.shopCart))},[g](e,{isSelected:t}){const n=e.shopCart;Object.values(n).forEach((e=>{e.checked,e.checked=!t})),e.shopCart={...n},(0,c.LS)("shopCart",e.shopCart)},[v](e){e.shopCart=null,e.shopCart={...e.shopCart}}},actions:{async getCartList(e){const t=await(0,C.tj)();if(t?.success){const n=t.data.list,r={};n.forEach((e=>{r[e.good.id]={num:e.number,cartId:e.id,goodsId:e.good.id,name:e.good.goods_name,small_image:e.good.goods_img,price:e.good.price,checked:e.selected}})),(0,c.LS)("shopCart",r),e.commit("INIT_SHOP_CART")}}},getters:{selectedNumber(e){return e.selectArr.length},totalPrice(e){let t=0;return e.selectArr.forEach((e=>{t+=e.num*Number(e.price)})),t}}},y={namespaced:!0,state:{list:[],order_id:(0,c.rV)("orderId")||""},mutations:{[b](e,t){e.list=t,e.order_id=t,(0,c.LS)("orderId",t)}}},w=(0,r.MT)({getters:a,modules:{user:d,cart:A,order:y}})},1836:function(e,t,n){n.d(t,{Dy:function(){return i},dr:function(){return s}});var r=n(8948),o=n(7247);function a(){return(0,o.rV)(r.mC)}function i(){(0,o.LS)(r.mC,Date.now())}function s(){var e=Date.now(),t=a();return e-t>r.$t}},4471:function(e,t,n){n(767);var r=n(7619),o=(n(1703),n(6265)),a=n.n(o),i=n(2867),s=n(1836);a().defaults.withCredentials=!0;const c=a().create({baseURL:"http://106.52.197.60:4001/api/v1",timeout:5e3});c.interceptors.request.use((e=>{if(i.Z.getters.token){if((0,s.dr)())return i.Z.commit("user/loginOut"),Promise.reject(new Error("登录过期请重新登录"));e.headers.Authorization=`Bearer ${i.Z.getters.token}`}return e}),(e=>Promise.reject(e))),c.interceptors.response.use((e=>{const{success:t,msg:n}=e.data;return t?e.data:"10101"===e.data.code?(r.Z.fail("登录过期请重新登录"),void i.Z.commit("user/loginOut")):"10102"!==e.data.code?(r.Z.fail(n),Promise.reject(new Error(n))):void 0}),(e=>(e.response&&e.response.data&&401===e.response.data.code&&console.log("token超时"),r.Z.fail(e.message),Promise.reject(e)))),t["Z"]=c},7247:function(e,t,n){n.d(t,{LS:function(){return r},cl:function(){return a},rV:function(){return o},yZ:function(){return i}});const r=(e,t)=>{"object"===typeof t&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)},o=e=>{const t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(n){return t}},a=e=>{window.localStorage.removeItem(e)},i=e=>{window.localStorage.clear()}},4054:function(e,t,n){e.exports=n.p+"img/loading.1ad321c9.gif"},6023:function(e){e.exports="data:image/jpeg;base64,R0lGODlh+gD6APMAAMzMzPPz89TU1ODg4O7u7ujo6M/Pz+Li4tLS0tra2tfX1+vr693d3eXl5fDw8Pb29iH5BAAAAAAALAAAAAD6APoAAAT+8MlJq7046827/2AojmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHhMLpvP6LR6zW673/C4fE6v2+/4vH7P7/v/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra6vsLGys7S1tre4ubq7vL2+v8DBwsPExcbHyMnKy8zNzs/Q0dLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vP09fb3+Pn6+8EBAbYEAAA4gEHAwBMJBCpUaGDAPwkBBBZAccAAAYAKF1wwSNBEwoX+IC1ClHgiIoCLtQIKFLDxoEcAAywUMMjygcmJJkyipKVSYMwKHBHCvKBS482SAnfOUjlAoEYKQSkcQKDQ4YaEPy1QJXiTgIKVDSxMrfrwwUeFO8f6LHtKZQCDCIC6tGkwpFILWDFQDWuyIsiOdEECEGkW5MW3ggm3FRjAgQEADKDONWig40wACNhWyGtB5WGFChw8cEB5AmXLcB/qND0YNWbNo9w+OOCUteXaEwI8zop3aIWxCkYCqClhQdIHBXBD3C0cZXIAT5f7NiX7wdfMEqIyGG6haVwMZwVjFm1TYNjcJLcTn+C9uQT13TGjqu4YcnaXX3lLSG4gQ/iFCvD+dhR6AEyUn0yDuWfddBPwNx9jE9BW4ANRGaQfchBewJkGAwo3kYUIAvDPahQyuF+GpVQnwXWIdXRgBQ0kCJ6JF3RY3oQvUhBjfzeilOMEOz4oIgW6AZCAdtxV0NR6m9FogY1HwadkkiRKScGSQmoW42AuPRedTczNeOGTJBE4kZdEhkkimrmFSR2KE3wlEGCn7UcZbBNsmAGUZdaJ3J0eslaZnYPhGYqKuVE1F2J2aaAnBnxOGFijEyg6IaMLKfbmkBZsCZgEajVkaJ5OVhApTqAqKmoFBNQFWKhW8SPrrLTWauutuOaq66689urrr8AGK+ywxBZr7LHIJqvsssxjNuvss9BGK+201FZr7bXYZqvtttx26+234IYr7rjklmvuueimq+667Lbr7rvwxivvvPTWa++9+Oar77789uvvvwAHLPDABBds8MEIJ6zwwgw37PDDEEcs8cQUV2zxxRhnjEYEADs="}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,a){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],o=e[d][1],a=e[d][2];for(var s=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{2:"32130b51",110:"6a414f81",124:"8dd66dfb",165:"095065ab",167:"bc686467",188:"753c3b1d",217:"31661156",270:"b2ca1bed",356:"ae8377ab",439:"df5edd77",440:"42c2cbe2",457:"2b5cb11b",470:"72ffe96e",523:"e2a21c0b",553:"26751f19",596:"db55dfe4",672:"8e114ac3",679:"d5a8acd2",690:"7120f601",736:"2700f1e9",877:"4e6f6537",975:"09fe4924",979:"53f40dff",982:"01cb39df"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{2:"46dc225e",110:"5163eed4",124:"3553865e",165:"7ae60487",167:"4e2fc2ff",188:"e0f9b2ef",217:"317d5670",270:"45a1a6a1",356:"95bfc1de",439:"23f9da24",440:"a4455e90",457:"3f2746ea",523:"c62daec1",553:"3a1fe0ee",672:"2aa2c8f9",679:"84477b79",975:"107de666",979:"2df2c524",982:"e612df2d"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="mall:";n.l=function(r,o,a,i){if(e[r])e[r].push(o);else{var s,c;if(void 0!==a)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var l=u[d];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==t+a){s=l;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[o];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(m);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e=function(e,t,n,r){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var a=function(a){if(o.onerror=o.onload=null,"load"===a.type)n();else{var i=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,o.parentNode.removeChild(o),r(c)}};return o.onerror=o.onload=a,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=n[r],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){o=i[r],a=o.getAttribute("data-href");if(a===e||a===t)return o}},r=function(r){return new Promise((function(o,a){var i=n.miniCssF(r),s=n.p+i;if(t(i,s))return o();e(r,s,o,a)}))},o={143:0};n.f.miniCss=function(e,t){var n={2:1,110:1,124:1,165:1,167:1,188:1,217:1,270:1,356:1,439:1,440:1,457:1,523:1,553:1,672:1,679:1,975:1,979:1,982:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=r(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,r){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else if(/^(440|975)$/.test(t))e[t]=0;else{var a=new Promise((function(n,r){o=e[t]=[n,r]}));r.push(o[2]=a);var i=n.p+n.u(t),s=new Error,c=function(r){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}};n.l(i,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,i=r[0],s=r[1],c=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)var d=c(n)}for(t&&t(r);u<i.length;u++)a=i[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},r=self["webpackChunkmall"]=self["webpackChunkmall"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(3262)}));r=n.O(r)})();
//# sourceMappingURL=app.591eb361.js.map