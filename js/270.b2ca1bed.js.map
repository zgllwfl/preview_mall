{"version":3,"file":"js/270.b2ca1bed.js","mappings":"oXASA,MAAMA,EAAU,KACdC,EAAK,c,iICJP,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,S,kPCQA,MAAMC,GAASC,EAAAA,EAAAA,MACTC,GAAaC,EAAAA,EAAAA,IAAS,CAC1BC,aAAc,EACdC,KAAM,CACJ,CAAEC,UAAWN,EAAOO,MAAMC,IAAKC,KAAM,KAAMD,IAAK,MAChD,CAAEF,UAAWN,EAAOO,MAAMC,IAAKC,KAAM,KAAMC,KAAM,EAAGF,IAAK,SACzD,CAAEF,UAAWN,EAAOO,MAAMC,IAAKC,KAAM,KAAMC,KAAM,EAAGF,IAAK,YAIvDG,GAAUC,EAAAA,EAAAA,KAAS,KACvB,MAAMC,EAAMX,EAAWG,KAAKH,EAAWE,cAEjCU,EAAkB,KAAZD,EAAIH,KAAc,MAAQ,OACtC,MAAO,CACLF,IAAK,CAACK,EAAIL,KAAK,GACfO,MAAOD,MAMLE,EAAaC,IACjBf,EAAWE,aAAea,EAE1B,MAAMC,EAAOhB,EAAWG,KAAKY,GAE7Bf,EAAWG,KAAKc,SAAQ,CAACL,EAAKM,KACxBA,GAAKH,IACPH,EAAIJ,KAAO,MAIfQ,EAAKR,KAAOO,IAAUf,EAAWE,aAA8B,IAAdc,EAAKR,KAAa,EAAI,EAAK,GAE5EW,EAAM,iBAAkBV,EAAQI,Q,shBC7ClC,MAAMhB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,S,oXCuBA,MAAMuB,GAASC,EAAAA,EAAAA,MACTC,EAAcC,IAClBH,EAAOI,KAAK,CACVC,KAAM,UACNpB,MAAO,CACLkB,GAAAA,M,kmBC9BN,MAAM1B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,S,uHCHO,MAAM6B,EAAc,CAACC,EAAYlB,KAC/BmB,EAAAA,EAAAA,GAAQ,CACbC,IAAK,gBACLC,OAAQ,CACNH,WAAAA,EACAlB,QAAAA,EACAsB,SAAU,M,kVC6BhB,MAAMC,GAAcC,EAAAA,EAAAA,MACdC,EAAkBC,IACtBH,EAAYnB,MAAQsB,IAGtBC,EAAAA,EAAAA,KACE,IAAMJ,EAAYnB,QACjBA,IACCwB,EAAc,KAAMxB,MAIxB,MAAMf,GAASC,EAAAA,EAAAA,MACTuC,GAAaL,EAAAA,EAAAA,IAAI,IACjBM,GAAUN,EAAAA,EAAAA,KAAI,GACdI,EAAgBG,MAAOlC,EAAKmC,KAChC,GAAInC,EAAK,CACP,MAAM,KAAEH,SAAeuB,EAAY5B,EAAOO,MAAMC,IAAKmC,GACrDH,EAAWzB,MAAQV,EAAKuC,KACxBH,EAAQ1B,OAAQ,EAElB,MAAM,KAAEV,SAAeuB,EAAY5B,EAAOO,MAAMC,IAAKmC,GACrDH,EAAWzB,MAAQV,EAAKuC,KACxBH,EAAQ1B,OAAQ,GAElBwB,IAEA,MAAMM,GAAYV,EAAAA,EAAAA,IAAI,MAChBW,EAAY,IAAMD,EAAU9B,MAAMgC,SAAS,EAAG,EAAG,KAEjDC,GAAkBb,EAAAA,EAAAA,IAAI,GACtBc,GAAcd,EAAAA,EAAAA,KAAI,GAClBe,EAAgBC,IACpBH,EAAgBjC,MAAQqC,KAAKC,IAAIF,EAASG,GAC1CL,EAAYlC,MAAQoC,EAASG,GAAK,K,OAGpCC,EAAAA,EAAAA,KAAoB,KAClBhB,EAAcvC,EAAOO,MAAMC,IAAK0B,EAAYnB,U,oxBCxE9C,MAAMhB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://mall/./src/components/backTop/BackTop.vue","webpack://mall/./src/components/backTop/BackTop.vue?4694","webpack://mall/./src/components/filter/Filter.vue","webpack://mall/./src/components/filter/Filter.vue?9447","webpack://mall/./src/components/list/CardList.vue","webpack://mall/./src/components/list/CardList.vue?ec81","webpack://mall/./src/api/search.js","webpack://mall/./src/views/search/List.vue","webpack://mall/./src/views/search/List.vue?9f20"],"sourcesContent":["<template>\r\n  <div class=\"back-top\" @click=\"backTop\">\r\n    <slot> <i class=\"iconfont icon-arrow-up\"></i> <span>顶部</span> </slot>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst emit = defineEmits(['backToTop'])\r\n\r\nconst backTop = () => {\r\n  emit('backToTop')\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.back-top {\r\n  position: fixed;\r\n  bottom: 66px;\r\n  right: 16px;\r\n  z-index: 5000;\r\n  width: 40px;\r\n  height: 40px;\r\n  background-color: #fff;\r\n  border: 0.01rem solid #e2e2e2;\r\n  border-radius: 50%;\r\n  box-shadow: 0 0 2px 0 rgba(0, 0, 255, 0.2);\r\n  text-align: center;\r\n  i {\r\n    display: block;\r\n    margin-bottom: -2px;\r\n    color: #58595b;\r\n  }\r\n  span {\r\n    font-size: 13px;\r\n    color: #58595b;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./BackTop.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BackTop.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BackTop.vue?vue&type=style&index=0&id=04e9cbf4&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-04e9cbf4\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"query-bar border-1px\">\r\n    <div v-for=\"(item, index) in searchList.data\" :key=\"index\" class=\"query-bar-item\" @click=\"changeTab(index)\">\r\n      <span :class=\"searchList.currentIndex === index ? 'active' : ' '\">{{ item.name }}</span>\r\n      <div v-show=\"index !== 0\" class=\"query-bar-item-arrow\">\r\n        <i class=\"iconfont icon-arrow-up\" :class=\"item.sort === 1 ? 'active' : ''\"></i>\r\n        <i class=\"iconfont icon-arrow-down\" :class=\"item.sort === 2 ? 'active' : ''\"></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, computed } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\n\r\nconst routes = useRoute()\r\nconst searchList = reactive({\r\n  currentIndex: 0,\r\n  data: [\r\n    { searchKey: routes.query.key, name: '综合', key: 'id' },\r\n    { searchKey: routes.query.key, name: '价格', sort: 0, key: 'price' },\r\n    { searchKey: routes.query.key, name: '销量', sort: 0, key: 'sales' }\r\n  ]\r\n})\r\n\r\nconst orderBy = computed(() => {\r\n  const obj = searchList.data[searchList.currentIndex]\r\n  //判断是升序还是降序\r\n  const val = obj.sort == '1' ? 'asc' : 'desc'\r\n  return {\r\n    key: [obj.key][0],\r\n    value: val\r\n  }\r\n})\r\n\r\nconst emits = defineEmits(['getFilterParam'])\r\n\r\nconst changeTab = (index) => {\r\n  searchList.currentIndex = index\r\n  //点击的下标对应数据的哪一个\r\n  const item = searchList.data[index]\r\n  //取消所有的状态值===》都变成0\r\n  searchList.data.forEach((val, i) => {\r\n    if (i != index) {\r\n      val.sort = 0\r\n    }\r\n  })\r\n  //当前点击的改变状态\r\n  item.sort = index === searchList.currentIndex ? (item.sort === 1 ? 2 : 1) : ''\r\n  //发送请求进行数据排序\r\n  emits('getFilterParam', orderBy.value)\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.query-bar {\r\n  z-index: 1000;\r\n  background-color: #fff;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 10px 13px;\r\n  .query-bar-item {\r\n    align-items: center;\r\n    color: #222;\r\n    display: flex;\r\n    font-size: 15px;\r\n    .query-bar-item-arrow {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      height: 8px;\r\n      line-height: 8px;\r\n      margin-left: 5px;\r\n      font-weight: 600;\r\n    }\r\n  }\r\n}\r\n\r\n.active {\r\n  color: $primary;\r\n}\r\n</style>\r\n","import script from \"./Filter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Filter.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Filter.vue?vue&type=style&index=0&id=eddfb094&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-eddfb094\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"card-list-container\">\r\n    <div v-for=\"item in productData\" :key=\"item.Id\" class=\"goods-item\" @click=\"goToDetail(item.id)\">\r\n      <div class=\"goods-img-container\">\r\n        <!-- <img class=\"goods-img\" alt=\"\" :src=\"item.goods_img\" /> -->\r\n        <img v-lazy=\"item.goods_img\" class=\"goods-img\" alt=\"\" />\r\n        <span v-show=\"item.Slogan\" class=\"goods-slogan\">\r\n          {{ item.Slogan }}\r\n        </span>\r\n      </div>\r\n      <div class=\"goods-info\">\r\n        <h3 class=\"goods-title\">{{ item.goods_name }}</h3>\r\n        <div class=\"goods-price\">\r\n          <span>{{ item.price }}</span>\r\n          <span class=\"old-price\">￥{{ item.old_price }}</span>\r\n        </div>\r\n        <div class=\"sale-num\">已售{{ item.sales }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useRouter } from 'vue-router'\r\n\r\ndefineProps({\r\n  productData: {\r\n    type: Array\r\n  }\r\n})\r\n\r\nconst router = useRouter()\r\nconst goToDetail = (id) => {\r\n  router.push({\r\n    path: '/detail',\r\n    query: {\r\n      id\r\n    }\r\n  })\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.card-list-container {\r\n  padding: 5px 10px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  .goods-item {\r\n    width: calc(50% - 5px);\r\n    background-color: #fff;\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-top: 10px;\r\n    position: relative;\r\n    .goods-img-container {\r\n      position: relative;\r\n      width: 100%;\r\n      .goods-img {\r\n        height: 100%;\r\n        width: 100%;\r\n        display: block;\r\n      }\r\n      .goods-slogan {\r\n        background-color: rgba(0, 0, 0, 0.3);\r\n        bottom: 0;\r\n        color: #fff;\r\n        font-size: 12.5px;\r\n        height: 22.5px;\r\n        left: 0;\r\n        line-height: 22.5px;\r\n        overflow: hidden;\r\n        position: absolute;\r\n        text-align: center;\r\n        text-overflow: ellipsis;\r\n        width: 100%;\r\n        word-break: break-all;\r\n      }\r\n    }\r\n    .goods-info {\r\n      padding: 5px;\r\n      .goods-title {\r\n        font-size: 14px;\r\n        line-height: 1.6;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        word-break: break-all;\r\n      }\r\n      .goods-price {\r\n        align-items: flex-end;\r\n        color: $primary;\r\n        display: flex;\r\n        font-size: 17px;\r\n        margin-top: 5px;\r\n        &:before {\r\n          content: '￥';\r\n          font-size: 14px;\r\n          font-weight: 400;\r\n        }\r\n        .old-price {\r\n          font-size: 12.5px;\r\n          margin-left: 5px;\r\n          text-decoration: line-through;\r\n          color: rgb(153, 153, 153);\r\n        }\r\n      }\r\n      .sale-num {\r\n        color: #999;\r\n        font-size: 12.5px;\r\n        margin-top: 3px;\r\n        padding-left: 3px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./CardList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CardList.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CardList.vue?vue&type=style&index=0&id=67424e60&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-67424e60\"]])\n\nexport default __exports__","import request from '@/utils/request'\r\n\r\n/**\r\n * 获取商品详情\r\n */\r\nexport const searchGoods = (goods_name, orderBy) => {\r\n  return request({\r\n    url: '/goods/search',\r\n    params: {\r\n      goods_name,\r\n      orderBy,\r\n      pageSize: 50\r\n    }\r\n  })\r\n}\r\n","<template>\r\n  <div v-if=\"!loading\">\r\n    <div class=\"query-bar-container\">\r\n      <div v-if=\"searchData.length !== 0\">\r\n        <!-- 筛选部分 -->\r\n        <Filter @getFilterParam=\"getFilterParam\"></Filter>\r\n\r\n        <!-- 商品列表 -->\r\n        <scroll\r\n          ref=\"scrollRef\"\r\n          class=\"scroll\"\r\n          :listen-scroll=\"true\"\r\n          :bounce=\"{ top: false, bottom: false }\"\r\n          @scroll=\"listenScroll\"\r\n        >\r\n          <SearchList v-show=\"searchData.length !== 0\" :product-data=\"searchData\"></SearchList>\r\n        </scroll>\r\n      </div>\r\n\r\n      <div v-else class=\"s_null\">\r\n        <p class=\"tip\">抱歉！暂无相关商品</p>\r\n        <p class=\"small\">换个关键词试试吧～</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <van-loading v-else type=\"spinner\" style=\"position: absolute; left: 50%; top: 40%; transform: translate(-50%)\">\r\n    正在拼命加载中…\r\n  </van-loading>\r\n  <back-top v-show=\"showBackTop\" @backToTop=\"backToTop\"></back-top>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\nimport { useRoute, onBeforeRouteUpdate } from 'vue-router'\r\nimport { searchGoods } from '@/api/search'\r\nimport Scroll from 'components/scroll/Scroll'\r\nimport BackTop from 'components/backTop/BackTop'\r\nimport SearchList from 'components/list/CardList'\r\nimport Filter from 'components/filter/Filter'\r\n\r\nconst filterParam = ref()\r\nconst getFilterParam = (param) => {\r\n  filterParam.value = param\r\n}\r\n\r\nwatch(\r\n  () => filterParam.value,\r\n  (value) => {\r\n    getSearchList(null, value)\r\n  }\r\n)\r\n\r\nconst routes = useRoute()\r\nconst searchData = ref([])\r\nconst loading = ref(true)\r\nconst getSearchList = async (key, filter) => {\r\n  if (key) {\r\n    const { data } = await searchGoods(routes.query.key, filter)\r\n    searchData.value = data.list\r\n    loading.value = false\r\n  }\r\n  const { data } = await searchGoods(routes.query.key, filter)\r\n  searchData.value = data.list\r\n  loading.value = false\r\n}\r\ngetSearchList()\r\n\r\nconst scrollRef = ref(null)\r\nconst backToTop = () => scrollRef.value.scrollTo(0, 0, 800) // x轴, y轴, 时间\r\n\r\nconst scrollPositionY = ref(0)\r\nconst showBackTop = ref(false)\r\nconst listenScroll = (position) => {\r\n  scrollPositionY.value = Math.abs(position.y)\r\n  showBackTop.value = position.y < -1000\r\n}\r\n\r\nonBeforeRouteUpdate(() => {\r\n  getSearchList(routes.query.key, filterParam.value)\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.scroll {\r\n  top: 80px;\r\n  bottom: 0;\r\n}\r\n\r\n.back-top {\r\n  bottom: 30px;\r\n}\r\n\r\n.s_null {\r\n  margin-top: 50%;\r\n  padding: 10px;\r\n  text-align: center;\r\n  .tip {\r\n    line-height: 1;\r\n    text-align: center;\r\n    margin-bottom: 15px;\r\n    font-size: 16px;\r\n    color: #333;\r\n  }\r\n  .small {\r\n    font-size: 14px;\r\n    color: #999;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./List.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./List.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./List.vue?vue&type=style&index=0&id=91dfeb7a&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\面试\\\\源码\\\\mall\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-91dfeb7a\"]])\n\nexport default __exports__"],"names":["backTop","emit","__exports__","routes","useRoute","searchList","reactive","currentIndex","data","searchKey","query","key","name","sort","orderBy","computed","obj","val","value","changeTab","index","item","forEach","i","emits","router","useRouter","goToDetail","id","push","path","searchGoods","goods_name","request","url","params","pageSize","filterParam","ref","getFilterParam","param","watch","getSearchList","searchData","loading","async","filter","list","scrollRef","backToTop","scrollTo","scrollPositionY","showBackTop","listenScroll","position","Math","abs","y","onBeforeRouteUpdate"],"sourceRoot":""}